<form [formGroup]="form">
  <div class="form-group">
    <label for="password">Old password</label>
    <input 
      formControlName="password"
      type="password" 
      id="password" 
      name="password" 
      class="form-control">
    <div *ngIf="password.pending" class="alert alert-warning">Checking...</div>
    <div *ngIf="password.touched && password.invalid" class="alert alert-danger">
      <div *ngIf="password.errors.required">Password is required</div>
      <div *ngIf="password.errors.isWrong">Current password is not valid</div>
    </div>
  </div>

  <div class="form-group">
    <label for="new-password">New password</label>
    <input 
      formControlName="newPassword"
      type="password"
      id="new-password" 
      name="new-password" 
      class="form-control">
    <div *ngIf="newPassword.touched && newPassword.invalid" class="alert alert-danger">
      <div *ngIf="newPassword.errors.required">New password is required</div>
      <div *ngIf="newPassword.errors.minlength">New password should be minimum {{newPassword.errors.minlength.requiredLength}} characters</div>
    </div>
  </div>

  <div class="form-group">
    <label for="repeat-password">Repeat password</label>
    <input 
      formControlName="repeatPassword"
      type="password" 
      id="repeat-password" 
      name="repeat-password" 
      class="form-control">
      <div *ngIf="repeatPassword.touched && repeatPassword.invalid" class="alert alert-danger">
        <div *ngIf="newPassword.errors.required">New password is required</div>
      </div>
      <div *ngIf="repeatPassword.valid && form.errors && form.errors.notMatch" class="alert alert-danger">
        Passwords does not match
      </div>
  </div>

  <button [disabled]="form.invalid" class="btn btn-primary">Submit</button>
</form>

{{form.invalid | json}}
